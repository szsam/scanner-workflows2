#!/usr/bin/env bash

cmake -S . -B build \
  -DWAMR_BUILD_AOT=1 -DWAMR_BUILD_INTERP=1 -DWAMR_BUILD_FAST_JIT=1 -DWAMR_BUILD_JIT=1 \
  -DWAMR_BUILD_CUSTOM_NAME_SECTION=0 \
  -DWAMR_BUILD_DEBUG_INTERP=0 \
  -DWAMR_BUILD_DEBUG_AOT=0 \
  -DWAMR_BUILD_DUMP_CALL_STACK=0 \
  -DWAMR_BUILD_LIBC_UVWASI=0 \
  -DWAMR_BUILD_LIBC_EMCC=0 \
  -DWAMR_BUILD_LIB_RATS=0 \
  -DWAMR_BUILD_LOAD_CUSTOM_SECTION=0 \
  -DWAMR_BUILD_MEMORY_PROFILING=0 \
  -DWAMR_BUILD_MINI_LOADER=0 \
  -DWAMR_BUILD_MULTI_MODULE=0 \
  -DWAMR_BUILD_PERF_PROFILING=0 \
  -DWAMR_BUILD_SPEC_TEST=0 \
  -DWAMR_BUILD_BULK_MEMORY=1 \
  -DWAMR_BUILD_LIB_PTHREAD=1 \
  -DWAMR_BUILD_LIB_PTHREAD_SEMAPHORE=1 \
  -DWAMR_BUILD_LIB_WASI_THREADS=1 \
  -DWAMR_BUILD_LIBC_BUILTIN=1 \
  -DWAMR_BUILD_LIBC_WASI=1 \
  -DWAMR_BUILD_REF_TYPES=1 \
  -DWAMR_BUILD_SIMD=1 \
  -DWAMR_BUILD_SHARED_MEMORY=1 \
  -DWAMR_BUILD_TAIL_CALL=1 \
  -DWAMR_BUILD_THREAD_MGR=1
cmake --build build --config Release --parallel $(nproc)
